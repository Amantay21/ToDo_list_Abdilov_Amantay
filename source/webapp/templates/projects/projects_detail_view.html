{% extends 'base.html' %}

{% block menu %}
    <a class="nav-link" aria-current="page"  href="{% url 'webapp:index' %}">На главную</a>
    <a class="nav-link" aria-current="page" href="{% url 'webapp:projects_update' project.pk%}">Добавить проект</a>
    <a class="nav-link" aria-current="page" href="{% url 'webapp:projects_delete' project.pk%}">Удалить проект</a>
    <a class="nav-link" aria-current="page" href="{% url 'webapp:tasks_create' project.pk%}">Добавить задачу</a>
{% endblock %}

{% block content %}
    <h1>Project</h1>


        <div class="card" >
            <div class="card-body">
                <h3 class="card-title">{{ project.title }}</h3>
                <h5 class="card-title">{{ project.description }}</h5>
                <p class="card-text">start date: {{ project.start_date }}</p>
                <p class="card-text">End date: {{ project.end_date }}</p>
                <li><a href="#">Edit</a></li>
                <li><a href="#">Delete</a></li>
            </div>
        </div>


    <div class="tasks d-flex justify-content-start row g-4">
    {% for task in project.tasks.all %}
        <div class="col-sm-12 col-md-6 col-lg-3 d-flex flex-row mb-3">
        <div class="card my-3 " style="width: 18rem;">
            <div class="card-body ">
                <h5 class="card-title">{{ task.title }}</h5>
                <h5 class="card-title">{{ task.get_status_display }}</h5>
                <h6 class="card-subtitle mb-2 text-body-secondary">{{ task.description }}</h6>
                <h6 class="card-subtitle mb-2 text-body-secondary">{{ task.updated_date }}</h6>
                <h6 class="card-subtitle mb-2 ">Типы: {% for types in task.types.all %}
                  {{ types.title }}{% if not forloop.last %}, {% endif %}
                    {% endfor %}</h6>
                <p><a href="{% url 'webapp:tasks_view' pk=task.pk %}" class="card-link">Подробнее...</a></p>
                <p><a href="{% url 'webapp:task_update' pk=task.pk %}" class="card-link">Редактировать</a></p>
                <p><a href="{% url 'webapp:task_delete' pk=task.pk %}" class="card-link" >Delete</a></p>

            </div>
        </div>
        </div>

        {% empty %}
        нет задач
    {% endfor %}
    </div>
{% endblock %}
